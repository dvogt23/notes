<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rails - Knowledge book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Fixable notes of my life and experience">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Knowledge</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../productivity.html"><strong aria-hidden="true">1.1.</strong> Productivity</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Tech</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Apps</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tech/app/pass.html"><strong aria-hidden="true">2.1.1.</strong> Pass</a></li><li class="chapter-item expanded "><a href="../../tech/app/vim.html"><strong aria-hidden="true">2.1.2.</strong> Vim</a></li><li class="chapter-item expanded "><a href="../../tech/app/firefox.html"><strong aria-hidden="true">2.1.3.</strong> Firefox</a></li></ol></li><li class="chapter-item expanded "><a href="../../tech/bash.html"><strong aria-hidden="true">2.2.</strong> Bash</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.</strong> Coding</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tech/coding/basic.html"><strong aria-hidden="true">2.3.1.</strong> Basic</a></li><li class="chapter-item expanded "><a href="../../tech/coding/environment.html"><strong aria-hidden="true">2.3.2.</strong> Environment</a></li><li class="chapter-item expanded "><a href="../../tech/coding/git.html"><strong aria-hidden="true">2.3.3.</strong> Git</a></li><li class="chapter-item expanded "><a href="../../tech/coding/kotlin.html"><strong aria-hidden="true">2.3.4.</strong> Kotlin</a></li><li class="chapter-item expanded "><a href="../../tech/coding/make.html"><strong aria-hidden="true">2.3.5.</strong> Make</a></li><li class="chapter-item expanded "><a href="../../tech/coding/maven.html"><strong aria-hidden="true">2.3.6.</strong> Maven</a></li><li class="chapter-item expanded "><a href="../../tech/coding/rails.html" class="active"><strong aria-hidden="true">2.3.7.</strong> Rails</a></li><li class="chapter-item expanded "><a href="../../tech/coding/ruby.html"><strong aria-hidden="true">2.3.8.</strong> Ruby</a></li><li class="chapter-item expanded "><a href="../../tech/coding/rust.html"><strong aria-hidden="true">2.3.9.</strong> Rust</a></li><li class="chapter-item expanded "><a href="../../tech/coding/javascript.html"><strong aria-hidden="true">2.3.10.</strong> Javascript</a></li><li class="chapter-item expanded "><a href="../../tech/coding/python.html"><strong aria-hidden="true">2.3.11.</strong> Python</a></li></ol></li><li class="chapter-item expanded "><a href="../../tech/equipment.html"><strong aria-hidden="true">2.4.</strong> Equipment</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.5.</strong> Linux</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tech/linux/apps.html"><strong aria-hidden="true">2.5.1.</strong> Apps</a></li><li class="chapter-item expanded "><a href="../../tech/linux/arch.html"><strong aria-hidden="true">2.5.2.</strong> Arch linux</a></li><li class="chapter-item expanded "><a href="../../tech/linux/linux_commands.html"><strong aria-hidden="true">2.5.3.</strong> Linux commands</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.6.</strong> Self-hosting</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tech/selfhosting/ideas.html"><strong aria-hidden="true">2.6.1.</strong> Ideas</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.7.</strong> Smart-Home</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../tech/smarthome/knx.html"><strong aria-hidden="true">2.7.1.</strong> KNX</a></li><li class="chapter-item expanded "><a href="../../tech/smarthome/homeassistent.html"><strong aria-hidden="true">2.7.2.</strong> Home-Assistent</a></li></ol></li><li class="chapter-item expanded "><a href="../../tech/misc.html"><strong aria-hidden="true">2.8.</strong> Misc</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Personal</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Input</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../personal/input/music.html"><strong aria-hidden="true">3.1.1.</strong> Music</a></li><li class="chapter-item expanded "><a href="../../personal/input/books.html"><strong aria-hidden="true">3.1.2.</strong> Books</a></li><li class="chapter-item expanded "><a href="../../personal/input/podcasts.html"><strong aria-hidden="true">3.1.3.</strong> Podcasts</a></li><li class="chapter-item expanded "><a href="../../personal/input/series.html"><strong aria-hidden="true">3.1.4.</strong> Series</a></li><li class="chapter-item expanded "><a href="../../personal/input/movies.html"><strong aria-hidden="true">3.1.5.</strong> Movies</a></li><li class="chapter-item expanded "><a href="../../personal/input/videos.html"><strong aria-hidden="true">3.1.6.</strong> Videos</a></li><li class="chapter-item expanded "><a href="../../personal/input/articles.html"><strong aria-hidden="true">3.1.7.</strong> Articles</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Home</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../personal/home/furniture.html"><strong aria-hidden="true">3.2.1.</strong> Furniture</a></li><li class="chapter-item expanded "><a href="../../personal/home/clothing.html"><strong aria-hidden="true">3.2.2.</strong> Clothing</a></li><li class="chapter-item expanded "><a href="../../personal/home/cooking.html"><strong aria-hidden="true">3.2.3.</strong> Cooking</a></li><li class="chapter-item expanded "><a href="../../personal/home/garden.html"><strong aria-hidden="true">3.2.4.</strong> Garden</a></li><li class="chapter-item expanded "><a href="../../personal/home/garage.html"><strong aria-hidden="true">3.2.5.</strong> Garage</a></li><li class="chapter-item expanded "><a href="../../personal/home/pharmacy.html"><strong aria-hidden="true">3.2.6.</strong> Pharmacy</a></li><li class="chapter-item expanded "><a href="../../personal/home/homestead.html"><strong aria-hidden="true">3.2.7.</strong> Homestead</a></li><li class="chapter-item expanded "><a href="../../personal/home/kids.html"><strong aria-hidden="true">3.2.8.</strong> Kids</a></li></ol></li><li class="chapter-item expanded "><a href="../../personal/learning/index.html"><strong aria-hidden="true">3.3.</strong> Learning</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Sport</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../personal/sport/cycling.html"><strong aria-hidden="true">3.4.1.</strong> Cycling</a></li><li class="chapter-item expanded "><a href="../../personal/sport/hiking.html"><strong aria-hidden="true">3.4.2.</strong> Hiking</a></li></ol></li><li class="chapter-item expanded "><a href="../../personal/misc.html"><strong aria-hidden="true">3.5.</strong> Misc</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Travel</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Countries</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../travel/austria.html"><strong aria-hidden="true">4.1.1.</strong> Austria</a></li><li class="chapter-item expanded "><a href="../../travel/france.html"><strong aria-hidden="true">4.1.2.</strong> France</a></li><li class="chapter-item expanded "><a href="../../travel/germany.html"><strong aria-hidden="true">4.1.3.</strong> Germany</a></li><li class="chapter-item expanded "><a href="../../travel/greatbritian.html"><strong aria-hidden="true">4.1.4.</strong> Great britian</a></li><li class="chapter-item expanded "><a href="../../travel/greek.html"><strong aria-hidden="true">4.1.5.</strong> Greek</a></li><li class="chapter-item expanded "><a href="../../travel/israel.html"><strong aria-hidden="true">4.1.6.</strong> Israel</a></li><li class="chapter-item expanded "><a href="../../travel/italy.html"><strong aria-hidden="true">4.1.7.</strong> Italy</a></li><li class="chapter-item expanded "><a href="../../travel/kroatia.html"><strong aria-hidden="true">4.1.8.</strong> Kroatia</a></li><li class="chapter-item expanded "><a href="../../travel/marokko.html"><strong aria-hidden="true">4.1.9.</strong> Marokko</a></li><li class="chapter-item expanded "><a href="../../travel/netherland.html"><strong aria-hidden="true">4.1.10.</strong> Netherland</a></li><li class="chapter-item expanded "><a href="../../travel/portugal.html"><strong aria-hidden="true">4.1.11.</strong> Portugal</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Misc</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../misc/arts.html"><strong aria-hidden="true">5.1.</strong> Arts</a></li><li class="chapter-item expanded "><a href="../../misc/jokes.html"><strong aria-hidden="true">5.2.</strong> Jokes</a></li><li class="chapter-item expanded "><a href="../../misc/newwords.html"><strong aria-hidden="true">5.3.</strong> New words</a></li><li class="chapter-item expanded "><a href="../../misc/poems.html"><strong aria-hidden="true">5.4.</strong> Poems</a></li><li class="chapter-item expanded "><a href="../../misc/quotes.html"><strong aria-hidden="true">5.5.</strong> Quotes</a></li><li class="chapter-item expanded "><a href="../../misc/wie_man_gut_Schreibt.html"><strong aria-hidden="true">5.6.</strong> Wie man gut schreibt?</a></li><li class="chapter-item expanded "><a href="../../misc/29ways_to_stay_creative.html"><strong aria-hidden="true">5.7.</strong> 29 ways to stay creative</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Knowledge book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rails"><a class="header" href="#rails">Rails</a></h1>
<p>Rails is a very cool framework for web-applications and IMO the best for
mvp-prototyping and beyond.</p>
<h2 id="curriculum"><a class="header" href="#curriculum">Curriculum</a></h2>
<ul>
<li><a href="https://www.theodinproject.com/paths/full-stack-ruby-on-rails">Full Stack Ruby on Rails</a></li>
</ul>
<p>Learning from some youtube guys:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=8i5JFLfbWkE">Video</a> Source: <a href="https://github.com/justalever/projekt">Projekt</a></li>
<li><a href="https://www.youtube.com/watch?v=u2o_new-T0o&amp;t=555s">Video</a> Source:
<a href="https://github.com/StephenFiser/simple-pm/tree/episode-1">simple-pm</a></li>
<li>Best practises <a href="https://youtu.be/vw7PlBvLq9k">Semicolon&amp;Sons - Best practises I</a>
Passing ruby data to javaScript</li>
</ul>
<h2 id="professional-ruby-on-rails-developer-with-rails-5"><a class="header" href="#professional-ruby-on-rails-developer-with-rails-5">Professional Ruby on Rails Developer with Rails 5</a></h2>
<p>Some note while making the <a href="https://www.udemy.com/course/pro-ruby-on-rails-rails5/">udamy course</a> and some <a href="./ruby.html">ruby</a> notes:</p>
<h3 id="basics"><a class="header" href="#basics">Basics</a></h3>
<p>Render plain text:</p>
<pre><code class="language-ruby">def hello
  render plain: &quot;hello world!&quot;
end
</code></pre>
<p>Create a controller with a method and use a object in view:</p>
<pre><code class="language-ruby"># controller
class TodosController &lt; ApplicationController

  def new
   @todo = Todo.new 
  end

end

# view
&lt;%= form_for @todo do |f| %&gt;

&lt;% end %&gt;
</code></pre>
<p>Use <code>flash</code> for notifications:</p>
<pre><code class="language-ruby">#controller
@todo.save
flash[:notice] = &quot;Todo was created successfully&quot;

# view
&lt;% flash.each do |name, msg| %&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;% end %&gt;
</code></pre>
<p>A bootstrap styled flash messages:</p>
<pre><code class="language-ruby">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col-md-10 col-md-offset-1&quot;&gt;
    &lt;% flash.each do |name, msg| %&gt;
      &lt;div class=&quot;alert alert-&lt;%= name %&gt;&quot;&gt;
        &lt;a href=&quot;#&quot; class=&quot;close&quot; data-dismiss=&quot;alert&quot;&gt;×&lt;/a&gt;
        &lt;%= msg %&gt;
      &lt;/div&gt;
    &lt;% end %&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Render partials in view ie a file <code>views/layouts/_messages.html.erb</code>:</p>
<pre><code class="language-ruby">&lt;%= render 'layouts/messages' %&gt;
</code></pre>
<p>Before run a method do action:</p>
<pre><code class="language-ruby"># controller
before_action :set_todo, only: [:edit, :update, :show, :destroy]

private

  def set_todo
    @todo = Todo.find(params[:id])
  end

  def todo_params
    params.require(:todo).permit(:name, :description)
  end

  # permit has_many list
  def recipe_params  
    params.require(:recipe).permit(:name, :description, ingredient_ids: [])  
  end

end
</code></pre>
<p>Add pg to production for ie. heroku deployment:</p>
<pre><code class="language-ruby">group :production do
  gem 'pg'
end

bundle install --without production
</code></pre>
<p>Some simple validations:</p>
<pre><code class="language-ruby">validates :name, presence: true
validates :description, presence: true, length: { minimum: 5, maximum: 500 }
</code></pre>
<p>Application helpers:</p>
<pre><code class="language-ruby">helper_method :current_chef, :logged_in?

def current_chef
  @current_chef ||= Chef.find(session[:chef_id]) if session[:chef_id]
end

def logged_in?
  !!current_chef
end

def require_user
  if !logged_in?
    flash[:danger] = &quot;You must be logged in to perform that action&quot;
    redirect_to root_path
    # also possible
    redirect_to :back
  end
end
</code></pre>
<p>Render partial for model:</p>
<pre><code class="language-ruby"># View
&lt;% if recipe.ingredients.any? %&gt;  
  &lt;p&gt;Ingredients: &lt;%= render recipe.ingredients %&gt;&lt;/p&gt;  
&lt;% end %&gt;

# Now create a new partial _ingredient.html.erb under the app/views/ingredients folder for this to work

&lt;span class=&quot;badge&quot;&gt;&lt;%= link_to ingredient.name,   
                      ingredient_path(ingredient) %&gt;   &lt;/span&gt;
</code></pre>
<h3 id="model"><a class="header" href="#model">Model</a></h3>
<p>Order models by column:</p>
<pre><code class="language-ruby"># order by updated_at -&gt; top of model
default_scope -&gt; { order(updated_at: :desc) }
</code></pre>
<p>Get just the last 20 entries of a model</p>
<pre><code class="language-ruby">def self.most_recent  
  order(:created_at).last(20)  
end
</code></pre>
<h3 id="routes"><a class="header" href="#routes">Routes</a></h3>
<p>Set root route:</p>
<pre><code class="language-ruby"># router.rb
root &quot;pages#home&quot;
</code></pre>
<p>Specific route to controller#method:</p>
<pre><code class="language-ruby">get '/about', to: 'pages#about'
</code></pre>
<p>Nested routes:</p>
<pre><code class="language-ruby">resources :recipes do  
  resources :comments, only: [:create]  
end

# Form in view
&lt;%= form\_for(\[@recipe, @comment\], :html =&gt; {class: &quot;form-horizontal&quot;,   
                                                role: &quot;form&quot;}) do |f| %&gt;
</code></pre>
<h3 id="links"><a class="header" href="#links">Links</a></h3>
<p>Create links in views:</p>
<pre><code class="language-ruby">&lt;%= link_to &quot;Edit this todo&quot;, edit_todo_path(@todo) %&gt;
&lt;%= link_to &quot;Back to todos listing&quot;, todos_path %&gt;
&lt;td&gt;&lt;%= link_to 'delete', todo_path(todo), method: :delete, data: { confirm: &quot;Are you sure?&quot;} %&gt;&lt;/td&gt;
&lt;%= link_to &quot;MyRecipes&quot;, root_path, class: &quot;navbar-brand&quot;, id: &quot;logo&quot; %&gt;
&lt;%= link_to &quot;Sign up or log in&quot;, &quot;#&quot; class: &quot;btn btn-danger btn-lg&quot; %&gt;
</code></pre>
<h3 id="tests"><a class="header" href="#tests">Tests</a></h3>
<p>Create integration test for model:</p>
<pre><code class="language-ruby">rails generate integration_test recipes
</code></pre>
<p>Simple test root path:</p>
<pre><code class="language-ruby">test &quot;should get home&quot; do
  get pages_home_url
  assert_response :success
end

test &quot;should get root&quot; do
  get root_url
  assert_response :success
end
</code></pre>
<p>to fix this tests, do:</p>
<pre><code class="language-ruby">root &quot;pages#home&quot;
get 'pages/home', to: 'pages#home'

# controller
class PagesController &lt; ApplicationController
  def home
  end
end
</code></pre>
<p>Test a simple validation:</p>
<pre><code class="language-ruby">require 'test_helper'

class RecipeTest &lt; ActiveSupport::TestCase
  
  def setup
    @recipe = Recipe.new(name: &quot;vegetable&quot;, description: &quot;great vegetable recipe&quot;)  
  end
  
  test &quot;recipe should be valid&quot; do
    assert @recipe.valid?
  end  
  
  test &quot;name should be present&quot; do
    @recipe.name = &quot; &quot;
    assert_not @recipe.valid?
  end
  
  test &quot;description should be present&quot; do
    @recipe.description = &quot; &quot;
    assert_not @recipe.valid?
  end
  
  test &quot;description shouldn't be less than 5 characters&quot; do
    @recipe.description = &quot;a&quot; * 3
    assert_not @recipe.valid?
  end
  
  test &quot;description shouldn't be more than 500 characters&quot; do
    @recipe.description = &quot;a&quot; * 501
    assert_not @recipe.valid?
  end
  
  test &quot;should get recipes show&quot; do
    get recipe_path(@recipe)
    assert_template 'recipes/show'
    assert_match @recipe.name, response.body
    assert_match @recipe.description, response.body
    assert_match @chef.chefname, response.body
  end
  
  test &quot;should get recipes listing&quot; do
    get recipes_path
    assert_template 'recipes/index'
    assert_select &quot;a[href=?]&quot;, recipe_path(@recipe), text: @recipe.name
    assert_select &quot;a[href=?]&quot;, recipe_path(@recipe2), text: @recipe2.name
  end
end
</code></pre>
<p>Test a email validation:</p>
<pre><code class="language-ruby">require 'test_helper'

class ChefTest &lt; ActiveSupport::TestCase
  
  def setup
    @chef = Chef.new(chefname: &quot;mashrur&quot;, email: &quot;mashrur@example.com&quot;)
  end
  
  test &quot;should be valid&quot; do
    assert @chef.valid?
  end
  
  test &quot;name should be present&quot; do
    @chef.chefname = &quot; &quot;
    assert_not @chef.valid?
  end
  
  test &quot;name should be less than 30 characters&quot; do
    @chef.chefname = &quot;a&quot; * 31
    assert_not @chef.valid?
  end
  
  test &quot;email should be present&quot; do
    @chef.email = &quot; &quot;
    assert_not @chef.valid?
  end
  
  test &quot;email should not be too long&quot; do
    @chef.email = &quot;a&quot; * 245 + &quot;@example.com&quot;
    assert_not @chef.valid?
  end
  
  test &quot;email should accept correct format&quot; do
    valid_emails = %w[user@example.com MASHRUR@gmail.com M.first@yahoo.ca john+smith@co.uk.org]
    valid_emails.each do |valids|
      @chef.email = valids
      assert @chef.valid?, &quot;#{valids.inspect} should be valid&quot;
    end
  end
  
  test &quot;should reject invalid addresses&quot; do
    invalid_emails = %w[mashrur@example mashrur@example,com mashrur.name@gmail. joe@bar+foo.com]
    invalid_emails.each do |invalids|
      @chef.email = invalids
      assert_not @chef.valid?, &quot;#{invalids.inspect} should be invalid&quot;
    end
  end 
  
  test &quot;email should be unique and case insensitive&quot; do
    duplicate_chef = @chef.dup
    duplicate_chef.email = @chef.email.upcase
    @chef.save
    assert_not duplicate_chef.valid?
  end
  
  test &quot;reject an invalid signup&quot; do
    get signup_path
    assert_no_difference &quot;Chef.count&quot; do
      post chefs_path, params: { chef: { chefname: &quot; &quot;, 
                                 email: &quot; &quot;, password: &quot;password&quot;,
                                    password_confirmation: &quot; &quot; } }
    end
    assert_template 'chefs/new'
    assert_select 'h2.panel-title'
    assert_select 'div.panel-body'
  end
  
  test &quot;accept valid signup&quot; do
    get signup_path
    assert_difference &quot;Chef.count&quot;, 1 do
      post chefs_path, params: { chef: { chefname: &quot;mashrur&quot;, 
                email: &quot;mashrur@example.com&quot;, password: &quot;password&quot;,
                              password_confirmation: &quot;password&quot; } }
    end
    follow_redirect!
    assert_template 'chefs/show'
    assert_not flash.empty?
  end
  
end

# controller
class Chef &lt; ApplicationRecord
  validates :chefname, presence: true, length: { maximum: 30 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, length: { maximum: 255 },
                    format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  
end
</code></pre>
<p>Downcase before save with test:</p>
<pre><code class="language-ruby">before_save { self.email = email.downcase }

# And then test it with:

test &quot;email should be lower case before hitting db&quot; do
  mixed_email = &quot;JohN@ExampLe.com&quot;
  @chef.email = mixed_email
  @chef.save
  assert_equal mixed_email.downcase, @chef.reload.email 
end
</code></pre>
<p>Create a association and test it:</p>
<p>Association</p>
<pre><code class="language-ruby"># chef model
validates :chef_id, presence: true
has_many :recipes

# recipe model
belongs_to :chef

# destroy with dependent
has_many :recipes, dependent: :destroy
</code></pre>
<p>Test</p>
<pre><code class="language-ruby">def setup
  @chef = Chef.create!(chefname: &quot;mashrur&quot;, email: &quot;mashrur@example.com&quot;)
  @recipe = @chef.recipes.build(name: &quot;vegetable&quot;, description: &quot;great vegetable recipe&quot;)  
end

test &quot;recipe without chef should be invalid&quot; do
  @recipe.chef_id = nil
  assert_not @recipe.valid?
end
</code></pre>
<h3 id="styling"><a class="header" href="#styling">Styling</a></h3>
<p>Add <code>bootstrap</code> to project (good html/css tutorial <a href="https://learn.shayhowe.com/html-css/">link</a>):</p>
<pre><code class="language-ruby">gem 'bootstrap-sass', '~&gt; 3.3.7'
gem 'jquery-rails'

# app/assets/javascripts/application.js
//= require bootstrap-sprockets

# app/assets/stylesheets/custom.css.scss
@import &quot;bootstrap-sprockets&quot;;
@import &quot;bootstrap&quot;;
</code></pre>
<h3 id="views"><a class="header" href="#views">Views</a></h3>
<p>Render html for each data:</p>
<pre><code class="language-ruby">&lt;%= f.collection_check_boxes :ingredient_ids,   
                                    Ingredient.all, :id, :name do |cb| %&gt;  
&lt;% cb.label(class: &quot;checkbox-inline input_checkbox&quot;) {cb.check_box(class: &quot;checkbox&quot;) + cb.text} %&gt;  
      &lt;% end %&gt;
</code></pre>
<h3 id="database"><a class="header" href="#database">Database</a></h3>
<p>Create migration:</p>
<pre><code class="language-ruby">rails generate migration create_recipes

# modify the migration file
rails db:migrate
</code></pre>
<p>Rename column:</p>
<pre><code class="language-ruby">rename_column :recipes, :email, :description
rails db:migrate
</code></pre>
<p>Many to many association:</p>
<pre><code class="language-ruby"># Model
has_many :recipe_ingredients  
has_many :recipes, through: :recipe_ingredients
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../tech/coding/maven.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../tech/coding/ruby.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../tech/coding/maven.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../tech/coding/ruby.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
